{# escritura/templates/escritura/lista_escritos.html #}
{% extends 'base.html' %} {# Extends the base template #}

{% block title %}Lista de Escritos Públicos{% endblock %} {# Sets the specific title for this page #}

{% block content %} {# This content will be inserted into the 'content' block in base.html #}
    <h1 class="page-title">Escritos Públicos del Taller</h1>

    {% if escritos %}
        <ul class="escrito-list">
            {% for escrito in escritos %}
                {# MODIFICADO: La clase 'escrito-item' ahora es el contenedor principal para cada tarjeta #}
                <li class="escrito-item"> 
                    
                    {# AÑADIDO: El botón que controlará el estado de expansión/contracción. #}
                    {# Usamos <button> por accesibilidad. Los atributos aria son para lectores de pantalla. #}
                    <button 
                        class="toggle-button" 
                        aria-expanded="false" 
                        aria-controls="escrito-content-{{ escrito.pk }}"
                        title="Expandir/Contraer"
                    >
                    </button>
                    
                    <h2><a href="{% url 'escritura:detalle_escrito' pk=escrito.pk %}">{{ escrito.titulo }}</a></h2>
                    
                    {# MODIFICADO: Envolvemos el contenido en un div para poder controlarlo. #}
                    {# Le damos un ID único por si necesitamos controlarlo específicamente. #}
                    <div class="escrito-content" id="escrito-content-{{ escrito.pk }}">
                        {{ escrito.contenido|safe }} 
                    </div>

                    <div class="escrito-meta">
                        <p>Por: {{ escrito.autor.username }}</p>
                        <p>Publicado el: {{ escrito.fecha_creacion|date:"d M Y H:i" }}</p>
                    </div>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No hay escritos públicos disponibles en este momento.</p>
    {% endif %}
{% endblock %}